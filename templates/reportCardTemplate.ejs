<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Report Card</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        font-size: 12px;
        padding: 20px;
        margin: 0;
      }
      .report {
        page-break-after: always;
        border: 1px solid #ccc;
        padding: 20px;
      }
      .header,
      .footer {
        text-align: center;
      }
      .header img,
      .footer img {
        height: 60px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
      }
      th, td {
        border: 1px solid #ccc;
        padding: 4px 6px;
        text-align: center;
      }
      .student-info {
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <% students.forEach(student => { %>
      <div class="report">
        
        <!-- Header -->
        <div class="header">
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <% if (reportFormat.school_logo_url) { %>
              <img src="<%= reportFormat.school_logo_url %>" alt="School Logo" />
            <% } else { %>
              <div style="width: 60px;"></div>
            <% } %>

            <div>
              <%- reportFormat.header_html || "SCHOOL NAME HERE" %>
            </div>

            <% if (reportFormat.board_logo_url) { %>
              <img src="<%= reportFormat.board_logo_url %>" alt="Board Logo" />
            <% } else { %>
              <div style="width: 60px;"></div>
            <% } %>
          </div>
        </div>

        <!-- Student Info -->
        <div class="student-info">
          <strong>Name:</strong> <%= student.name %> |
          <strong>Roll No:</strong> <%= student.roll_number %> |
          <strong>Adm No:</strong> <%= student.admission_number %>
        </div>

        <!-- Marks Table -->
        <table>
          <thead>
            <tr>
              <th>Subject</th>
              <th>Component</th>
              <th>Marks</th>
              <th>Weighted</th>
              <th>Grade</th>
            </tr>
          </thead>
          <tbody>
            <% student.components.forEach(comp => { %>
              <tr>
                <td><%= comp.subject_name %></td>
                <td><%= comp.name %></td>
                <td><%= comp.marks %></td>
                <td><%= comp.weighted_marks %></td>
                <td><%= comp.grade %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>

        <!-- Footer -->
        <div class="footer" style="margin-top: 20px;">
          <%- reportFormat.footer_html || "Principal Signature" %>
        </div>
      </div>
    <% }); %>
  </body>
</html>
